<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="421px" preserveAspectRatio="none" style="width:594px;height:421px;background:#24273A;" version="1.1" viewBox="0 0 594 421" width="594px" zoomAndPan="magnify"><defs/><g><rect fill="#24273A" height="421" style="stroke:none;stroke-width:1.0;" width="594" x="0" y="0"/><!--cluster Defunctionalisation Pattern For Library-Defined Types (Id, Maybe, IO, Transformers)--><g id="cluster_Defunctionalisation Pattern For Library-Defined Types (Id, Maybe, IO, Transformers)"><path d="M7.5,6 L488.584,6 A2.25,2.25 0 0 1 490.084,7.5 L497.084,24 L585.5,24 A1.5,1.5 0 0 1 587,25.5 L587,412.5 A1.5,1.5 0 0 1 585.5,414 L7.5,414 A1.5,1.5 0 0 1 6,412.5 L6,7.5 A1.5,1.5 0 0 1 7.5,6 " fill="#24273A" style="stroke:#CAD3F5;stroke-width:1.5;"/><line style="stroke:#CAD3F5;stroke-width:1.5;" x1="6" x2="497.084" y1="24" y2="24"/><text fill="#CAD3F5" font-family="Helvetica" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="478.084" x="10" y="17.2402">Defunctionalisation Pattern For Library-Defined Types (Id, Maybe, IO, Transformers)</text></g><!--class IdKindInterface--><g id="elem_IdKindInterface"><rect codeLine="8" fill="#24273A" height="50" id="IdKindInterface" rx="1.5" ry="1.5" style="stroke:#C6A0F6;stroke-width:2.0;" width="265.7344" x="22.13" y="238"/><rect fill="#363A4F" height="30" rx="1.5" ry="1.5" style="stroke:#363A4F;stroke-width:2.0;" width="265.7344" x="22.13" y="238"/><rect fill="#363A4F" height="1.5" style="stroke:#363A4F;stroke-width:2.0;" width="265.7344" x="22.13" y="266.5"/><rect codeLine="8" fill="none" height="50" id="IdKindInterface" rx="1.5" ry="1.5" style="stroke:#C6A0F6;stroke-width:2.0;" width="265.7344" x="22.13" y="238"/><ellipse cx="122.3116" cy="253" fill="#B4A7E5" rx="10" ry="10" style="stroke:#181818;stroke-width:1.0;"/><path d="M119.3195,250.2754 L119.3195,248.752 L124.5284,248.752 L124.5284,250.2754 L122.7882,250.2754 L122.7882,255.9766 L124.5284,255.9766 L124.5284,257.5 L119.3195,257.5 L119.3195,255.9766 L121.0597,255.9766 L121.0597,250.2754 Z " fill="#CAD3F5"/><text fill="#A6DA95" font-family="Helvetica" font-size="16" font-style="italic" lengthAdjust="spacing" textLength="45.3672" x="141.3116" y="257.3203">IdKind</text><rect fill="#24273A" height="14" style="stroke:#C6A0F6;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="10.0039" x="280.8605" y="235"/><text fill="#CAD3F5" font-family="Helvetica" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="8.0039" x="281.8605" y="245.2402">A</text><line style="stroke:#C6A0F6;stroke-width:2.0;" x1="23.13" x2="286.8644" y1="268" y2="268"/><text fill="#A6DA95" font-family="Helvetica" font-size="12" lengthAdjust="spacing" textLength="253.7344" x="28.13" y="281.2402">class Witness {} ' Nested phantom Witness type</text></g><!--class Kind--><g id="elem_Kind"><rect fill="#24273A" height="30" id="Kind" rx="1.5" ry="1.5" style="stroke:#C6A0F6;stroke-width:2.0;" width="62.0234" x="123.99" y="128"/><rect fill="#363A4F" height="30" rx="1.5" ry="1.5" style="stroke:#363A4F;stroke-width:2.0;" width="62.0234" x="123.99" y="128"/><rect fill="#363A4F" height="1.5" style="stroke:#363A4F;stroke-width:2.0;" width="62.0234" x="123.99" y="156.5"/><rect fill="none" height="30" id="Kind" rx="1.5" ry="1.5" style="stroke:#C6A0F6;stroke-width:2.0;" width="62.0234" x="123.99" y="128"/><ellipse cx="137.99" cy="143" fill="#B4A7E5" rx="10" ry="10" style="stroke:#181818;stroke-width:1.0;"/><path d="M134.9978,140.2754 L134.9978,138.752 L140.2068,138.752 L140.2068,140.2754 L138.4666,140.2754 L138.4666,145.9766 L140.2068,145.9766 L140.2068,147.5 L134.9978,147.5 L134.9978,145.9766 L136.738,145.9766 L136.738,140.2754 Z " fill="#CAD3F5"/><text fill="#A6DA95" font-family="Helvetica" font-size="16" font-style="italic" lengthAdjust="spacing" textLength="32.0234" x="150.99" y="147.3203">Kind</text></g><!--class IdRecord--><g id="elem_IdRecord"><rect codeLine="12" fill="#24273A" height="30" id="IdRecord" rx="1.5" ry="1.5" style="stroke:#C6A0F6;stroke-width:2.0;" width="141.1719" x="84.41" y="368"/><rect fill="#363A4F" height="30" rx="1.5" ry="1.5" style="stroke:#363A4F;stroke-width:2.0;" width="141.1719" x="84.41" y="368"/><rect fill="#363A4F" height="1.5" style="stroke:#363A4F;stroke-width:2.0;" width="141.1719" x="84.41" y="396.5"/><rect codeLine="12" fill="none" height="30" id="IdRecord" rx="1.5" ry="1.5" style="stroke:#C6A0F6;stroke-width:2.0;" width="141.1719" x="84.41" y="368"/><ellipse cx="98.41" cy="383" fill="#ADD1B2" rx="10" ry="10" style="stroke:#181818;stroke-width:1.0;"/><path d="M100.244,387.248 Q99.8338,387.459 99.3827,387.5645 Q98.9315,387.6699 98.4334,387.6699 Q96.6639,387.6699 95.7323,386.5039 Q94.8006,385.3379 94.8006,383.1348 Q94.8006,380.9258 95.7323,379.7598 Q96.6639,378.5938 98.4334,378.5938 Q98.9315,378.5938 99.3885,378.6992 Q99.8455,378.8047 100.244,379.0156 L100.244,380.9375 Q99.7987,380.5273 99.3797,380.3369 Q98.9608,380.1465 98.5155,380.1465 Q97.5663,380.1465 97.0829,380.8994 Q96.5995,381.6523 96.5995,383.1348 Q96.5995,384.6113 97.0829,385.3643 Q97.5663,386.1172 98.5155,386.1172 Q98.9608,386.1172 99.3797,385.9268 Q99.7987,385.7363 100.244,385.3262 Z " fill="#CAD3F5"/><text fill="#A6DA95" font-family="Helvetica" font-size="16" lengthAdjust="spacing" textLength="111.1719" x="111.41" y="387.3203">Id&lt;A&gt;(value: A)</text></g><!--class IdKindHelper--><g id="elem_IdKindHelper"><rect codeLine="16" fill="#24273A" height="62" id="IdKindHelper" rx="1.5" ry="1.5" style="stroke:#C6A0F6;stroke-width:2.0;" width="248.4473" x="322.78" y="232"/><rect fill="#363A4F" height="30" rx="1.5" ry="1.5" style="stroke:#363A4F;stroke-width:2.0;" width="248.4473" x="322.78" y="232"/><rect fill="#363A4F" height="1.5" style="stroke:#363A4F;stroke-width:2.0;" width="248.4473" x="322.78" y="260.5"/><rect codeLine="16" fill="none" height="62" id="IdKindHelper" rx="1.5" ry="1.5" style="stroke:#C6A0F6;stroke-width:2.0;" width="248.4473" x="322.78" y="232"/><ellipse cx="396.7536" cy="247" fill="#ADD1B2" rx="10" ry="10" style="stroke:#181818;stroke-width:1.0;"/><path d="M398.5876,251.248 Q398.1775,251.459 397.7263,251.5645 Q397.2751,251.6699 396.7771,251.6699 Q395.0075,251.6699 394.0759,250.5039 Q393.1443,249.3379 393.1443,247.1348 Q393.1443,244.9258 394.0759,243.7598 Q395.0075,242.5938 396.7771,242.5938 Q397.2751,242.5938 397.7321,242.6992 Q398.1892,242.8047 398.5876,243.0156 L398.5876,244.9375 Q398.1423,244.5273 397.7234,244.3369 Q397.3044,244.1465 396.8591,244.1465 Q395.9099,244.1465 395.4265,244.8994 Q394.9431,245.6523 394.9431,247.1348 Q394.9431,248.6113 395.4265,249.3643 Q395.9099,250.1172 396.8591,250.1172 Q397.3044,250.1172 397.7234,249.9268 Q398.1423,249.7363 398.5876,249.3262 Z " fill="#CAD3F5"/><text fill="#A6DA95" font-family="Helvetica" font-size="16" lengthAdjust="spacing" textLength="92.5" x="415.7536" y="251.3203">IdKindHelper</text><line style="stroke:#C6A0F6;stroke-width:2.0;" x1="323.78" x2="570.2273" y1="262" y2="262"/><ellipse cx="333.78" cy="273.5" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#A6DA95" font-family="Helvetica" font-size="12" lengthAdjust="spacing" text-decoration="underline" textLength="197.4258" x="341.78" y="275.2402">wrap(id: Id&lt;A&gt;): Kind&lt;Id.Witness, A&gt;</text><ellipse cx="333.78" cy="285.5" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#A6DA95" font-family="Helvetica" font-size="12" lengthAdjust="spacing" text-decoration="underline" textLength="223.4473" x="341.78" y="287.2402">unwrap(kind: Kind&lt;Id.Witness, A&gt;): Id&lt;A&gt;</text></g><!--class IdentityMonad--><g id="elem_IdentityMonad"><rect codeLine="22" fill="#24273A" height="30" id="IdentityMonad" rx="1.5" ry="1.5" style="stroke:#C6A0F6;stroke-width:2.0;" width="130.5078" x="381.75" y="128"/><rect fill="#363A4F" height="30" rx="1.5" ry="1.5" style="stroke:#363A4F;stroke-width:2.0;" width="130.5078" x="381.75" y="128"/><rect fill="#363A4F" height="1.5" style="stroke:#363A4F;stroke-width:2.0;" width="130.5078" x="381.75" y="156.5"/><rect codeLine="22" fill="none" height="30" id="IdentityMonad" rx="1.5" ry="1.5" style="stroke:#C6A0F6;stroke-width:2.0;" width="130.5078" x="381.75" y="128"/><ellipse cx="395.75" cy="143" fill="#ADD1B2" rx="10" ry="10" style="stroke:#181818;stroke-width:1.0;"/><path d="M397.584,147.248 Q397.1738,147.459 396.7227,147.5645 Q396.2715,147.6699 395.7734,147.6699 Q394.0039,147.6699 393.0723,146.5039 Q392.1406,145.3379 392.1406,143.1348 Q392.1406,140.9258 393.0723,139.7598 Q394.0039,138.5938 395.7734,138.5938 Q396.2715,138.5938 396.7285,138.6992 Q397.1855,138.8047 397.584,139.0156 L397.584,140.9375 Q397.1387,140.5273 396.7197,140.3369 Q396.3008,140.1465 395.8555,140.1465 Q394.9063,140.1465 394.4229,140.8994 Q393.9395,141.6523 393.9395,143.1348 Q393.9395,144.6113 394.4229,145.3643 Q394.9063,146.1172 395.8555,146.1172 Q396.3008,146.1172 396.7197,145.9268 Q397.1387,145.7363 397.584,145.3262 Z " fill="#CAD3F5"/><text fill="#A6DA95" font-family="Helvetica" font-size="16" lengthAdjust="spacing" textLength="100.5078" x="408.75" y="147.3203">IdentityMonad</text></g><!--class Monad--><g id="elem_Monad"><rect fill="#24273A" height="30" id="Monad" rx="1.5" ry="1.5" style="stroke:#C6A0F6;stroke-width:2.0;" width="78.9219" x="407.54" y="37"/><rect fill="#363A4F" height="30" rx="1.5" ry="1.5" style="stroke:#363A4F;stroke-width:2.0;" width="78.9219" x="407.54" y="37"/><rect fill="#363A4F" height="1.5" style="stroke:#363A4F;stroke-width:2.0;" width="78.9219" x="407.54" y="65.5"/><rect fill="none" height="30" id="Monad" rx="1.5" ry="1.5" style="stroke:#C6A0F6;stroke-width:2.0;" width="78.9219" x="407.54" y="37"/><ellipse cx="421.54" cy="52" fill="#B4A7E5" rx="10" ry="10" style="stroke:#181818;stroke-width:1.0;"/><path d="M418.5478,49.2754 L418.5478,47.752 L423.7568,47.752 L423.7568,49.2754 L422.0166,49.2754 L422.0166,54.9766 L423.7568,54.9766 L423.7568,56.5 L418.5478,56.5 L418.5478,54.9766 L420.288,54.9766 L420.288,49.2754 Z " fill="#CAD3F5"/><text fill="#A6DA95" font-family="Helvetica" font-size="16" font-style="italic" lengthAdjust="spacing" textLength="48.9219" x="434.54" y="56.3203">Monad</text></g><!--reverse link Kind to IdKindInterface--><g id="link_Kind_IdKindInterface"><path d="M155,176.47 C155,196.16 155,213.68 155,237.55 " fill="none" id="Kind-backto-IdKindInterface" style="stroke:#F5BDE6;stroke-width:1.0;"/><polygon fill="none" points="155,158.47,149,176.47,161,176.47,155,158.47" style="stroke:#F5BDE6;stroke-width:1.0;"/></g><!--reverse link IdKindInterface to IdRecord--><g id="link_IdKindInterface_IdRecord"><path d="M141.4854,306.2547 C137.9354,330.1547 141.22,347.92 146.04,367.6 " fill="none" id="IdKindInterface-backto-IdRecord" style="stroke:#F5BDE6;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="144.13,288.45,135.5505,305.3731,147.4203,307.1362,144.13,288.45" style="stroke:#F5BDE6;stroke-width:1.0;"/></g><!--link IdRecord to IdKindInterface--><g id="link_IdRecord_IdKindInterface"><path codeLine="14" d="M163.96,367.6 C168.78,347.92 172.0646,330.1547 168.5146,306.2547 " fill="none" id="IdRecord-to-IdKindInterface" style="stroke:#F5BDE6;stroke-width:1.0;"/><polygon fill="none" points="165.87,288.45,162.5797,307.1362,174.4495,305.3731,165.87,288.45" style="stroke:#F5BDE6;stroke-width:1.0;"/></g><!--link IdKindHelper to IdRecord--><g id="link_IdKindHelper_IdRecord"><path codeLine="20" d="M371.8,294.39 C313.5,317.95 240.8929,347.292 196.1029,365.392 " fill="none" id="IdKindHelper-to-IdRecord" style="stroke:#F5BDE6;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#F5BDE6" points="190.54,367.64,200.3831,367.9766,195.1758,365.7666,197.3857,360.5593,190.54,367.64" style="stroke:#F5BDE6;stroke-width:1.0;"/><text fill="#CAD3F5" font-family="Helvetica" font-size="12" lengthAdjust="spacing" textLength="68.6836" x="293.24" y="334.2402">casts to/from</text></g><!--reverse link Monad to IdentityMonad--><g id="link_Monad_IdentityMonad"><path d="M447,85.3 C447,101.91 447,111.14 447,127.74 " fill="none" id="Monad-backto-IdentityMonad" style="stroke:#F5BDE6;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="447,67.3,441,85.3,453,85.3,447,67.3" style="stroke:#F5BDE6;stroke-width:1.0;"/></g><!--link IdentityMonad to IdKindHelper--><g id="link_IdentityMonad_IdKindHelper"><path codeLine="25" d="M447,158.47 C447,176.56 447,202.01 447,225.52 " fill="none" id="IdentityMonad-to-IdKindHelper" style="stroke:#F5BDE6;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#F5BDE6" points="447,231.52,451,222.52,447,226.52,443,222.52,447,231.52" style="stroke:#F5BDE6;stroke-width:1.0;"/><text fill="#CAD3F5" font-family="Helvetica" font-size="12" lengthAdjust="spacing" textLength="25.3477" x="448" y="198.2402">uses</text></g><!--SRC=[RLDBZzCm4BxdLmovj1LDSezGfKe8RRGi8BI8yzIPRAoD7x8dB57fVsSsBQsxr0VBcTVtiFDEMpMCBK7Fx6DTLG5VoYVD_RWR8mNbB9FbKZbJMUKYOw5LfP2z7vNIjZ2eLA-HNU47j3oQeU2U35K6jQtcO-abclLQGCXudi2GsL68MUPHFUCJGVwHkj4grixYe2E-7k0RCbEmyCa5-Ant0SDKI9ssrCBZv2d2icdNy83JZjRGV5t3Oq0REnUC35_biC-o36HfaH0wL8BJjFVQjX-scnmmml6hEQVfjsXj8ymrJLl-r6mfnZLiDp8CJaiD62ESSh0_m0A-K6HXvNjnm9bpZeNbt7QOzuK02ZHeZZHqe8qVn1tB_uX8Bhi0v7FnyXSE8zMmNPqOVoVbGlj_yqN5Fe4yrnV5dytRokmQxJLtHuEda9Xp32JgtyDU7W5hTO2NW7wfs_eeQrNVykrMtsZdpcUfljcpEasyqf6GASlDHLWDkS8eDh2hkk1C_aQLMAHvUf27rPva9P7KnZcGC4clV04_8brRSaKk7Nbabz0LXl8dHI5s-0i0]--></g></svg>