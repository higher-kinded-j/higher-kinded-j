<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>TransformerValidator.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">hkj-core</a> &gt; <a href="index.source.html" class="el_package">org.higherkindedj.hkt.util.validation</a> &gt; <span class="el_source">TransformerValidator.java</span></div><h1>TransformerValidator.java</h1><pre class="source lang-java linenums">// Copyright (c) 2025 Magnus Smith
// Licensed under the MIT License. See LICENSE.md in the project root for license information.
package org.higherkindedj.hkt.util.validation;

import java.util.Objects;
import org.higherkindedj.hkt.Monad;

/**
 * Handles domain-specific validations for transformers, witnesses, etc.
 *
 * &lt;p&gt;This validator provides specialized validation for Higher-Kinded-J specific concepts like
 * monad transformers and witness types.
 */
<span class="fc" id="L14">public enum TransformerValidator {</span>
<span class="fc" id="L15">  TRANSFORMER_VALIDATOR;</span>

  /**
   * Validates outer monad for transformer construction with class-based context.
   *
   * &lt;p&gt;This is the recommended method that uses the transformer class to automatically derive the
   * type name, ensuring consistency and refactoring safety.
   *
   * @param monad The outer monad to validate
   * @param transformerClass The class of the transformer (e.g., StateT.class, OptionalT.class)
   * @param methodName The method name for error context (e.g., &quot;construction&quot;, &quot;lift&quot;, &quot;map&quot;)
   * @param &lt;F&gt; The monad witness type
   * @return The validated monad
   * @throws NullPointerException with context-specific message if monad is null
   *     &lt;p&gt;Example usage:
   *     &lt;pre&gt;
   * // In constructor
   * DomainValidator.requireOuterMonad(monadF, StateT.class, &quot;construction&quot;);
   * // Error: &quot;Outer Monad cannot be null for StateT construction&quot;
   *
   * // In factory method
   * DomainValidator.requireOuterMonad(outerMonad, OptionalT.class, &quot;lift&quot;);
   * // Error: &quot;Outer Monad cannot be null for OptionalT.lift&quot;
   * &lt;/pre&gt;
   */
  public &lt;F&gt; Monad&lt;F&gt; requireOuterMonad(
      Monad&lt;F&gt; monad, Class&lt;?&gt; transformerClass, Operation methodName) {

<span class="fc" id="L43">    Objects.requireNonNull(transformerClass, &quot;transformerClass cannot be null&quot;);</span>
<span class="fc" id="L44">    Objects.requireNonNull(methodName, &quot;methodName cannot be null&quot;);</span>

<span class="fc" id="L46">    String transformerName = transformerClass.getSimpleName();</span>
<span class="fc" id="L47">    String context = transformerName + &quot; &quot; + methodName;</span>

<span class="fc" id="L49">    var domainContext = DomainContext.transformer(context);</span>
<span class="fc" id="L50">    return Objects.requireNonNull(monad, domainContext.nullParameterMessage());</span>
  }

  /**
   * Validates a transformer component using class-based context.
   *
   * &lt;p&gt;This is the recommended method that automatically derives the transformer name from the
   * class.
   *
   * @param component The component to validate
   * @param componentName The name of the component (e.g., &quot;inner Optional&quot;, &quot;state function&quot;)
   * @param transformerClass The class of the transformer (e.g., OptionalT.class, StateT.class)
   * @param methodName The method name for context (e.g., &quot;fromOptional&quot;, &quot;create&quot;)
   * @param &lt;T&gt; The component type
   * @return The validated component
   * @throws NullPointerException with descriptive message if component is null
   *     &lt;p&gt;Example usage:
   *     &lt;pre&gt;
   * DomainValidator.requireTransformerComponent(
   *     optional,
   *     &quot;inner Optional&quot;,
   *     OptionalT.class,
   *     &quot;fromOptional&quot;
   * );
   * // Error: &quot;inner Optional cannot be null for OptionalT.fromOptional&quot;
   * &lt;/pre&gt;
   */
  public &lt;T&gt; T requireTransformerComponent(
      T component, String componentName, Class&lt;?&gt; transformerClass, Operation methodName) {

<span class="fc" id="L80">    Objects.requireNonNull(transformerClass, &quot;transformerClass cannot be null&quot;);</span>
<span class="fc" id="L81">    Objects.requireNonNull(methodName, &quot;methodName cannot be null&quot;);</span>

<span class="fc" id="L83">    String transformerName = transformerClass.getSimpleName();</span>
<span class="fc" id="L84">    String fullContext = transformerName + &quot;.&quot; + methodName;</span>

<span class="fc" id="L86">    var context = DomainContext.transformer(fullContext);</span>

<span class="fc" id="L88">    return Objects.requireNonNull(</span>
<span class="fc" id="L89">        component, &quot;%s cannot be null for %s&quot;.formatted(componentName, fullContext));</span>
  }

  /** Context for domain-specific validations (transformers, etc.) */
  public record DomainContext(String domainType, String objectName) {

<span class="fc" id="L95">    public DomainContext {</span>
<span class="fc" id="L96">      Objects.requireNonNull(domainType, &quot;domainType cannot be null&quot;);</span>
<span class="fc" id="L97">      Objects.requireNonNull(objectName, &quot;objectName cannot be null&quot;);</span>
<span class="fc" id="L98">    }</span>

    public static DomainContext transformer(String transformerName) {
<span class="fc" id="L101">      return new DomainContext(&quot;Transformer&quot;, transformerName);</span>
    }

    public static DomainContext witness(String operation) {
<span class="fc" id="L105">      return new DomainContext(&quot;Witness&quot;, operation);</span>
    }

    public String nullParameterMessage() {
<span class="fc" id="L109">      return &quot;%s cannot be null for %s&quot;.formatted(domainType, objectName);</span>
    }
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.13.202504020838</span></div></body></html>