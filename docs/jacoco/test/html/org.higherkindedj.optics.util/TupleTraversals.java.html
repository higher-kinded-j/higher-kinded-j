<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>TupleTraversals.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">hkj-core</a> &gt; <a href="index.source.html" class="el_package">org.higherkindedj.optics.util</a> &gt; <span class="el_source">TupleTraversals.java</span></div><h1>TupleTraversals.java</h1><pre class="source lang-java linenums">// Copyright (c) 2025 Magnus Smith
// Licensed under the MIT License. See LICENSE.md in the project root for license information.
package org.higherkindedj.optics.util;

import java.util.function.Function;
import org.higherkindedj.hkt.Applicative;
import org.higherkindedj.hkt.Kind;
import org.higherkindedj.hkt.tuple.Tuple2;
import org.higherkindedj.optics.Traversal;
import org.jspecify.annotations.NullMarked;

/**
 * A final utility class providing static factory methods for creating {@link Traversal}s for {@link
 * Tuple2} types.
 *
 * &lt;p&gt;These combinators allow traversing tuple structures when both elements share the same type,
 * enabling operations like &quot;modify both elements of a pair simultaneously&quot;.
 *
 * &lt;p&gt;Example usage:
 *
 * &lt;pre&gt;{@code
 * // Modify both elements of a tuple
 * Traversal&lt;Tuple2&lt;Integer, Integer&gt;, Integer&gt; bothInts = TupleTraversals.both();
 * Tuple2&lt;Integer, Integer&gt; pair = new Tuple2&lt;&gt;(10, 20);
 * Tuple2&lt;Integer, Integer&gt; doubled = Traversals.modify(bothInts, x -&gt; x * 2, pair);
 * // Result: Tuple2(20, 40)
 *
 * // Get both elements
 * List&lt;Integer&gt; values = Traversals.getAll(bothInts, pair);
 * // Result: [10, 20]
 * }&lt;/pre&gt;
 */
@NullMarked
public final class TupleTraversals {

  /** Private constructor to prevent instantiation. */
  private TupleTraversals() {}

  /**
   * Creates a {@code Traversal} that focuses on both elements of a {@link Tuple2} when they share
   * the same type.
   *
   * &lt;p&gt;This traversal has cardinality 2, focusing on both the first and second elements of the
   * tuple. Effectful functions are applied to both positions, and the results are sequenced using
   * the applicative's {@code map2} operation.
   *
   * &lt;p&gt;This is particularly useful for:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;Applying the same transformation to both tuple elements
   *   &lt;li&gt;Collecting both values from a tuple
   *   &lt;li&gt;Composing with other traversals for nested structures
   * &lt;/ul&gt;
   *
   * &lt;p&gt;Example:
   *
   * &lt;pre&gt;{@code
   * Traversal&lt;Tuple2&lt;String, String&gt;, String&gt; bothStrings = TupleTraversals.both();
   *
   * // Modify both elements
   * Tuple2&lt;String, String&gt; names = new Tuple2&lt;&gt;(&quot;alice&quot;, &quot;bob&quot;);
   * Tuple2&lt;String, String&gt; capitalized = Traversals.modify(
   *     bothStrings,
   *     s -&gt; s.substring(0, 1).toUpperCase() + s.substring(1),
   *     names
   * );
   * // Result: Tuple2(&quot;Alice&quot;, &quot;Bob&quot;)
   *
   * // Extract both elements
   * List&lt;String&gt; allNames = Traversals.getAll(bothStrings, names);
   * // Result: [&quot;alice&quot;, &quot;bob&quot;]
   *
   * // Compose with other traversals
   * Traversal&lt;List&lt;Tuple2&lt;Integer, Integer&gt;&gt;, Integer&gt; allInts =
   *     Traversals.&lt;Tuple2&lt;Integer, Integer&gt;&gt;forList()
   *         .andThen(TupleTraversals.both());
   * }&lt;/pre&gt;
   *
   * @param &lt;A&gt; The type of both elements in the tuple.
   * @return A {@code Traversal} focusing on both elements of the tuple.
   */
  public static &lt;A&gt; Traversal&lt;Tuple2&lt;A, A&gt;, A&gt; both() {
<span class="fc" id="L83">    return new Traversal&lt;&gt;() {</span>
      @Override
      public &lt;F&gt; Kind&lt;F, Tuple2&lt;A, A&gt;&gt; modifyF(
          final Function&lt;A, Kind&lt;F, A&gt;&gt; f,
          final Tuple2&lt;A, A&gt; source,
          final Applicative&lt;F&gt; applicative) {
<span class="fc" id="L89">        return Traversals.traverseTuple2Both(source, f, applicative);</span>
      }
    };
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.13.202504020838</span></div></body></html>