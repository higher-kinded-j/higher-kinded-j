<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Effectful.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">hkj-core</a> &gt; <a href="index.source.html" class="el_package">org.higherkindedj.hkt.effect.capability</a> &gt; <span class="el_source">Effectful.java</span></div><h1>Effectful.java</h1><pre class="source lang-java linenums">// Copyright (c) 2025 Magnus Smith
// Licensed under the MIT License. See LICENSE.md in the project root for license information.
package org.higherkindedj.hkt.effect.capability;

import org.higherkindedj.hkt.effect.IOPath;
import org.higherkindedj.hkt.effect.VTaskPath;
import org.higherkindedj.hkt.trymonad.Try;

/**
 * A capability interface representing types that support deferred side effect execution.
 *
 * &lt;p&gt;This capability is specific to effect types like {@code IOPath} that encapsulate side effects.
 * Types implementing this interface provide methods to execute the deferred computation.
 *
 * &lt;h2&gt;Operations&lt;/h2&gt;
 *
 * &lt;ul&gt;
 *   &lt;li&gt;{@link #unsafeRun()} - Execute the effect synchronously (may throw)
 *   &lt;li&gt;{@link #runSafe()} - Execute the effect and wrap the result in a {@code Try}
 * &lt;/ul&gt;
 *
 * &lt;h2&gt;Safety Considerations&lt;/h2&gt;
 *
 * &lt;p&gt;The {@code unsafe} prefix on {@link #unsafeRun()} highlights that:
 *
 * &lt;ul&gt;
 *   &lt;li&gt;Side effects will be performed when called
 *   &lt;li&gt;Exceptions from the underlying computation will propagate
 *   &lt;li&gt;The operation may block the current thread
 * &lt;/ul&gt;
 *
 * &lt;p&gt;Prefer {@link #runSafe()} when exception handling is needed, or when composing with other
 * effect types.
 *
 * @param &lt;A&gt; the type of the value produced by the effect
 */
public sealed interface Effectful&lt;A&gt; extends Chainable&lt;A&gt; permits IOPath, VTaskPath {

  /**
   * Executes the deferred effect synchronously and returns the result.
   *
   * &lt;p&gt;&lt;b&gt;Warning:&lt;/b&gt; This method is &quot;unsafe&quot; because:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;It will perform side effects (I/O, mutations, etc.)
   *   &lt;li&gt;It may throw exceptions from the underlying computation
   *   &lt;li&gt;It may block the current thread for long-running operations
   * &lt;/ul&gt;
   *
   * &lt;p&gt;This should typically be called at the &quot;edge&quot; of your program, after building up a pure
   * description of the computation.
   *
   * &lt;p&gt;Example:
   *
   * &lt;pre&gt;{@code
   * String content = Path.io(() -&gt; Files.readString(path))
   *     .map(String::trim)
   *     .unsafeRun();
   * }&lt;/pre&gt;
   *
   * @return the result of executing the effect
   * @throws RuntimeException if the underlying computation throws
   */
  A unsafeRun();

  /**
   * Executes the deferred effect and wraps the result in a {@code Try}.
   *
   * &lt;p&gt;This is the safe alternative to {@link #unsafeRun()}. Any exceptions thrown during execution
   * are captured in a {@code Try.Failure} rather than propagating.
   *
   * &lt;p&gt;Example:
   *
   * &lt;pre&gt;{@code
   * Try&lt;String&gt; result = Path.io(() -&gt; Files.readString(path))
   *     .runSafe();
   *
   * result.fold(
   *     content -&gt; process(content),
   *     error -&gt; log.error(&quot;Failed to read file&quot;, error)
   * );
   * }&lt;/pre&gt;
   *
   * @return a {@code Try} containing either the result or the exception
   */
  default Try&lt;A&gt; runSafe() {
<span class="fc" id="L87">    return Try.of(this::unsafeRun);</span>
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.13.202504020838</span></div></body></html>