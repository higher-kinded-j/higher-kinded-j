<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>GetterExtensions.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">hkj-core</a> &gt; <a href="index.source.html" class="el_package">org.higherkindedj.optics.extensions</a> &gt; <span class="el_source">GetterExtensions.java</span></div><h1>GetterExtensions.java</h1><pre class="source lang-java linenums">// Copyright (c) 2025 Magnus Smith
// Licensed under the MIT License. See LICENSE.md in the project root for license information.
package org.higherkindedj.optics.extensions;

import org.higherkindedj.hkt.maybe.Maybe;
import org.higherkindedj.optics.Getter;
import org.jspecify.annotations.NullMarked;

/**
 * Extension utilities for {@link Getter} that integrate with higher-kinded-j core types.
 *
 * &lt;p&gt;This class provides null-safe alternatives to {@link Getter}'s methods, returning {@link
 * Maybe} instead of potentially null values. This ensures safe handling of nullable fields while
 * maintaining consistency with higher-kinded-j's functional programming patterns.
 *
 * &lt;h2&gt;Why Null-Safe Getters?&lt;/h2&gt;
 *
 * &lt;p&gt;While optics typically assume non-null values, real-world data structures often contain
 * nullable fields. {@code GetterExtensions} bridges this gap by:
 *
 * &lt;ul&gt;
 *   &lt;li&gt;Converting potentially null values to {@code Maybe.nothing()} automatically
 *   &lt;li&gt;Allowing safe chaining of operations without null checks
 *   &lt;li&gt;Maintaining type safety throughout the transformation pipeline
 *   &lt;li&gt;Providing consistent error handling with other optics extensions
 * &lt;/ul&gt;
 *
 * &lt;h2&gt;Example Usage&lt;/h2&gt;
 *
 * &lt;pre&gt;{@code
 * import static org.higherkindedj.optics.extensions.GetterExtensions.*;
 *
 * // Define a record with nullable fields
 * record Person(String name, @Nullable Address address) {}
 * record Address(String city, @Nullable String zipCode) {}
 *
 * // Create getters (potentially returning null)
 * Getter&lt;Person, Address&gt; addressGetter = Getter.of(Person::address);
 * Getter&lt;Address, String&gt; zipCodeGetter = Getter.of(Address::zipCode);
 *
 * Person person = new Person(&quot;Alice&quot;, null);
 *
 * // Get address safely as Maybe
 * Maybe&lt;Address&gt; address = getMaybe(addressGetter, person);
 * address.ifJust(addr -&gt; System.out.println(&quot;City: &quot; + addr.city()));
 * // Output: (nothing - no output)
 *
 * // Chain operations safely
 * Maybe&lt;String&gt; zipCode = getMaybe(addressGetter, person)
 *     .flatMap(addr -&gt; getMaybe(zipCodeGetter, addr));
 *
 * String result = zipCode.orElse(&quot;No ZIP code available&quot;);
 * }&lt;/pre&gt;
 *
 * &lt;h2&gt;Integration with Lens&lt;/h2&gt;
 *
 * &lt;p&gt;Since every {@link org.higherkindedj.optics.Lens} can be viewed as a {@code Getter} (via
 * {@code Lens::asGetter} or direct usage), these extensions work seamlessly with lenses:
 *
 * &lt;pre&gt;{@code
 * Lens&lt;Person, Address&gt; addressLens = PersonLenses.address();
 *
 * // Use as Getter with Maybe
 * Maybe&lt;Address&gt; address = getMaybe(addressLens, person);
 * }&lt;/pre&gt;
 *
 * &lt;h2&gt;Method Correspondence&lt;/h2&gt;
 *
 * &lt;table&gt;
 *   &lt;caption&gt;Getter methods and their Maybe-based equivalents&lt;/caption&gt;
 *   &lt;thead&gt;
 *     &lt;tr&gt;
 *       &lt;th&gt;Getter Method&lt;/th&gt;
 *       &lt;th&gt;GetterExtensions Method&lt;/th&gt;
 *       &lt;th&gt;Return Type&lt;/th&gt;
 *       &lt;th&gt;Null Handling&lt;/th&gt;
 *     &lt;/tr&gt;
 *   &lt;/thead&gt;
 *   &lt;tbody&gt;
 *     &lt;tr&gt;
 *       &lt;td&gt;{@link Getter#get(Object)}&lt;/td&gt;
 *       &lt;td&gt;{@link #getMaybe(Getter, Object)}&lt;/td&gt;
 *       &lt;td&gt;{@code Maybe&lt;A&gt;}&lt;/td&gt;
 *       &lt;td&gt;null â†’ {@code Maybe.nothing()}&lt;/td&gt;
 *     &lt;/tr&gt;
 *   &lt;/tbody&gt;
 * &lt;/table&gt;
 *
 * @see Getter
 * @see Maybe
 * @see FoldExtensions
 * @since 1.0
 */
@NullMarked
public final class GetterExtensions {

<span class="fc" id="L97">  private GetterExtensions() {</span>
<span class="fc" id="L98">    throw new UnsupportedOperationException(&quot;Utility class - do not instantiate&quot;);</span>
  }

  /**
   * Gets the focused value as {@link Maybe}, returning {@code Maybe.nothing()} if the value is
   * null.
   *
   * &lt;p&gt;This method provides null-safe access to getter values, converting null results to {@code
   * Maybe.nothing()} and non-null results to {@code Maybe.just(value)}.
   *
   * &lt;p&gt;Example:
   *
   * &lt;pre&gt;{@code
   * record User(String name, @Nullable String email) {}
   *
   * Getter&lt;User, String&gt; emailGetter = Getter.of(User::email);
   *
   * User userWithEmail = new User(&quot;Alice&quot;, &quot;alice@example.com&quot;);
   * User userWithoutEmail = new User(&quot;Bob&quot;, null);
   *
   * // Safe access with Maybe
   * Maybe&lt;String&gt; email1 = getMaybe(emailGetter, userWithEmail);
   * email1.ifJust(e -&gt; sendEmail(e)); // Sends email
   *
   * Maybe&lt;String&gt; email2 = getMaybe(emailGetter, userWithoutEmail);
   * email2.ifJust(e -&gt; sendEmail(e)); // Does nothing
   *
   * // Chain operations safely
   * Maybe&lt;String&gt; uppercaseEmail = getMaybe(emailGetter, userWithEmail)
   *     .map(String::toUpperCase);
   *
   * // Provide default value
   * String displayEmail = getMaybe(emailGetter, userWithoutEmail)
   *     .orElse(&quot;no-email@example.com&quot;);
   * }&lt;/pre&gt;
   *
   * &lt;h3&gt;When to Use This&lt;/h3&gt;
   *
   * &lt;ul&gt;
   *   &lt;li&gt;When working with data structures that may contain null values
   *   &lt;li&gt;When you want to chain operations safely without null checks
   *   &lt;li&gt;When integrating with external systems that may return null
   *   &lt;li&gt;When you want consistent {@code Maybe}-based error handling across your codebase
   * &lt;/ul&gt;
   *
   * &lt;h3&gt;Performance Note&lt;/h3&gt;
   *
   * &lt;p&gt;This method has minimal overhead compared to direct {@code get} usage. The conversion from
   * null to {@code Maybe.nothing()} is a simple branch, and {@code Maybe} instances are typically
   * allocated on the stack by modern JVMs with escape analysis.
   *
   * @param getter The getter to use for extracting the value
   * @param source The source structure to extract from
   * @param &lt;S&gt; The source type
   * @param &lt;A&gt; The focused value type
   * @return {@code Maybe.just(value)} if the value is non-null, {@code Maybe.nothing()} if the
   *     value is null
   */
  public static &lt;S, A&gt; Maybe&lt;A&gt; getMaybe(Getter&lt;S, A&gt; getter, S source) {
<span class="fc" id="L157">    return Maybe.fromNullable(getter.get(source));</span>
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.13.202504020838</span></div></body></html>