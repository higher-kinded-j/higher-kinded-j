<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Getter.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">hkj-core</a> &gt; <a href="index.source.html" class="el_package">org.higherkindedj.optics</a> &gt; <span class="el_source">Getter.java</span></div><h1>Getter.java</h1><pre class="source lang-java linenums">// Copyright (c) 2025 Magnus Smith
// Licensed under the MIT License. See LICENSE.md in the project root for license information.
package org.higherkindedj.optics;

import java.util.Map;
import java.util.function.Function;
import org.higherkindedj.hkt.Monoid;

/**
 * A **Getter** is a read-only optic that focuses on exactly one element. Think of it as a
 * functional &quot;accessor&quot; that provides a composable way to extract values from structures.
 *
 * &lt;p&gt;A Getter is the right tool for:
 *
 * &lt;ul&gt;
 *   &lt;li&gt;Extracting a single computed or derived value from a structure
 *   &lt;li&gt;Wrapping pure functions in optic form for composition
 *   &lt;li&gt;Creating a read-only view of a field without modification capability
 * &lt;/ul&gt;
 *
 * &lt;p&gt;Every {@link Lens} can be viewed as a Getter (using {@link Lens#asFold()} and extracting via
 * {@code get}), but not every Getter can be a Lens since Getters don't provide a way to set values.
 *
 * &lt;p&gt;A Getter extends {@link Fold} because it always focuses on exactly one element, making it a
 * special case of Fold with cardinality 1.
 *
 * &lt;p&gt;&lt;b&gt;Example usage:&lt;/b&gt;
 *
 * &lt;pre&gt;{@code
 * record Person(String firstName, String lastName) {}
 *
 * // Create a getter for the full name (computed value)
 * Getter&lt;Person, String&gt; fullName = Getter.of(p -&gt; p.firstName() + &quot; &quot; + p.lastName());
 *
 * Person person = new Person(&quot;John&quot;, &quot;Doe&quot;);
 * String name = fullName.get(person); // &quot;John Doe&quot;
 *
 * // Compose getters
 * Getter&lt;String, Integer&gt; length = Getter.of(String::length);
 * Getter&lt;Person, Integer&gt; nameLength = fullName.andThen(length);
 * int len = nameLength.get(person); // 8
 * }&lt;/pre&gt;
 *
 * @param &lt;S&gt; The source type (the structure being queried).
 * @param &lt;A&gt; The target type (the value being extracted).
 */
public interface Getter&lt;S, A&gt; extends Fold&lt;S, A&gt; {

  /**
   * Gets the focused value from the source structure.
   *
   * &lt;p&gt;This is the core operation of a Getter. Unlike {@link Lens#get}, this operation is
   * inherently read-only and doesn't imply any ability to set the value back.
   *
   * @param source The source structure.
   * @return The focused value.
   */
  A get(S source);

  /**
   * {@inheritDoc}
   *
   * &lt;p&gt;For a Getter, this applies the function to the single focused element and returns the
   * result. Since a Getter always focuses on exactly one element, the monoid's {@code combine} is
   * never called.
   */
  @Override
  default &lt;M&gt; M foldMap(Monoid&lt;M&gt; monoid, Function&lt;? super A, ? extends M&gt; f, S source) {
<span class="fc" id="L69">    return f.apply(get(source));</span>
  }

  /**
   * Composes this {@code Getter&lt;S, A&gt;} with another {@code Getter&lt;A, B&gt;} to create a new {@code
   * Getter&lt;S, B&gt;}.
   *
   * &lt;p&gt;Example:
   *
   * &lt;pre&gt;{@code
   * Getter&lt;Person, Address&gt; addressGetter = ...;
   * Getter&lt;Address, String&gt; cityGetter = ...;
   * Getter&lt;Person, String&gt; personCity = addressGetter.andThen(cityGetter);
   * }&lt;/pre&gt;
   *
   * @param other The Getter to compose with.
   * @param &lt;B&gt; The type of the final focused value.
   * @return A new composed Getter.
   */
  default &lt;B&gt; Getter&lt;S, B&gt; andThen(Getter&lt;A, B&gt; other) {
<span class="fc" id="L89">    Getter&lt;S, A&gt; self = this;</span>
<span class="fc" id="L90">    return new Getter&lt;&gt;() {</span>
      @Override
      public B get(S source) {
<span class="fc" id="L93">        return other.get(self.get(source));</span>
      }
    };
  }

  /**
   * Converts this Getter to a {@link Fold}.
   *
   * &lt;p&gt;This is always valid since a Getter is a Fold that focuses on exactly one element.
   *
   * @return A Fold view of this Getter.
   */
  default Fold&lt;S, A&gt; asFold() {
<span class="fc" id="L106">    return this;</span>
  }

  /**
   * Creates a Getter from a function.
   *
   * &lt;p&gt;This is the primary factory method for creating Getters. The provided function defines how
   * to extract the focused value from the source structure.
   *
   * &lt;p&gt;Example:
   *
   * &lt;pre&gt;{@code
   * Getter&lt;String, Integer&gt; stringLength = Getter.of(String::length);
   * Getter&lt;Person, String&gt; firstName = Getter.of(Person::firstName);
   * }&lt;/pre&gt;
   *
   * @param getter The function that extracts the focused value.
   * @param &lt;S&gt; The source type.
   * @param &lt;A&gt; The target type.
   * @return A new Getter.
   */
  static &lt;S, A&gt; Getter&lt;S, A&gt; of(Function&lt;S, A&gt; getter) {
<span class="fc" id="L128">    return getter::apply;</span>
  }

  /**
   * Creates a Getter from a function.
   *
   * &lt;p&gt;This is an alias for {@link #of(Function)} that provides a more descriptive name,
   * emphasizing the &quot;extraction&quot; aspect of a Getter.
   *
   * &lt;p&gt;Example:
   *
   * &lt;pre&gt;{@code
   * Getter&lt;List&lt;String&gt;, Integer&gt; listSize = Getter.to(List::size);
   * }&lt;/pre&gt;
   *
   * @param getter The function that extracts the focused value.
   * @param &lt;S&gt; The source type.
   * @param &lt;A&gt; The target type.
   * @return A new Getter.
   */
  static &lt;S, A&gt; Getter&lt;S, A&gt; to(Function&lt;S, A&gt; getter) {
<span class="fc" id="L149">    return of(getter);</span>
  }

  /**
   * Creates a Getter that always returns the same constant value, ignoring the source.
   *
   * &lt;p&gt;Example:
   *
   * &lt;pre&gt;{@code
   * Getter&lt;String, Integer&gt; always42 = Getter.constant(42);
   * always42.get(&quot;anything&quot;); // 42
   * }&lt;/pre&gt;
   *
   * @param value The constant value to return.
   * @param &lt;S&gt; The source type (ignored).
   * @param &lt;A&gt; The target type.
   * @return A Getter that always returns the given value.
   */
  static &lt;S, A&gt; Getter&lt;S, A&gt; constant(A value) {
<span class="fc" id="L168">    return source -&gt; value;</span>
  }

  /**
   * Creates a Getter that returns the source itself (identity getter).
   *
   * &lt;p&gt;Example:
   *
   * &lt;pre&gt;{@code
   * Getter&lt;String, String&gt; id = Getter.identity();
   * id.get(&quot;hello&quot;); // &quot;hello&quot;
   * }&lt;/pre&gt;
   *
   * @param &lt;S&gt; The source and target type.
   * @return An identity Getter.
   */
  static &lt;S&gt; Getter&lt;S, S&gt; identity() {
<span class="fc" id="L185">    return source -&gt; source;</span>
  }

  /**
   * Creates a Getter for the first element of a pair.
   *
   * @param &lt;A&gt; The type of the first element.
   * @param &lt;B&gt; The type of the second element.
   * @return A Getter that extracts the first element.
   */
  static &lt;A, B&gt; Getter&lt;Map.Entry&lt;A, B&gt;, A&gt; first() {
<span class="fc" id="L196">    return Map.Entry::getKey;</span>
  }

  /**
   * Creates a Getter for the second element of a pair.
   *
   * @param &lt;A&gt; The type of the first element.
   * @param &lt;B&gt; The type of the second element.
   * @return A Getter that extracts the second element.
   */
  static &lt;A, B&gt; Getter&lt;Map.Entry&lt;A, B&gt;, B&gt; second() {
<span class="fc" id="L207">    return Map.Entry::getValue;</span>
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.13.202504020838</span></div></body></html>